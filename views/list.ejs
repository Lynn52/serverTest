<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  </head>
  <body>
    <%- include('menu.html') %>
      <div class="headerArea">
        <h1> ğŸ“œ </h1>
      </div>
      <p></p>
      <div class="bottomContainer" style="margin-bottom: 30px;">
        <div class="container input-group ml-2 my-3">
          <input type="search" class="form-control sword" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥"></input>
          <button class="btn btn-outline sbtn"> ê²€ìƒ‰í•˜ê¸° </button>
        </div>
      </div>
      
      <table class="table table-hover table-striped text-center container">
        <thead style="border-color: black; border-style: solid;">
          <tr>
            <th scope="col">ì œëª©</th>
            <th scope="col">ì‘ì„±ì¼</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody style="align-items: center; justify-content: center; text-align: center;">
            <% for(let i = 0; i < data.length ; i++){ %>
                <tr>
                    <td><a href="/content/<%= data[i]._id %>"> <%= data[i].title %> </a></td>
                    <td> <%= data[i].date %></td>
                    <td><button class="delete deleteBtn" data-id="<%= data[i]._id%>"> Delete </button></td>
                </tr>
            <% } %>
        </tbody>
      </table>

      <div class="bottomContainer my-3">
        <button class="btn btn-outline enter">ê¸€ì“°ê¸°</button>
      </div>
        
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script>
        $('.delete').click(function(e){
            let sid = e.target.dataset.id; //í´ë¦­í•œ ë²„íŠ¼ì˜ idë¥¼ sidë¼ëŠ” ë³€ìˆ˜ì— ë„˜ê¸°ê¸°
            $.ajax({
              type : "post",
              url : "/delete",
              data : { _id : sid } 
            }).done(function(result){
                //ì‘ë‹µì— ì„±ê³µí–ˆì„ ë•Œ
                //í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ì‚­ì œ ìƒíƒœ ë°˜ì˜ ê°€ëŠ¥ = í•´ë‹¹ ê²Œì‹œë¬¼ ì œëª© ì‚­ì œë¨
                //location.reload();  
                //cf. location.href="ì´ë™í•  ì£¼ì†Œ", location.replace="ì´ë™í•  ì£¼ì†Œ"
                //= location.replace("");
                item.parent('td').parent('tr').remove();
                console.log('success');
            }).fail(function(xhr, textStatus, errorThrown){
              //ì‘ë‹µì— ì‹¤íŒ¨í–ˆì„ ë•Œ
              console.log('ê²Œì‹œë¬¼ ì‚­ì œ ì‹¤íŒ¨');
              console.log(xhr, textStatus, errorThrown);
            })
        })
      
        $('.enter').click(function(e){
          location.href = "\enter";
        })

        $('.sbtn').click(function(e){
          let inputValue = $('.sword').val();
          location.href='\\search?value=' + inputValue;
        })
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
  </body>
</html>